---
phase: 06.1-uat-gap-closure
plan: 04
type: execute
wave: 3
depends_on: ["06.1-02"]
files_modified:
  - README.md
  - docs/gsd-integration.md
  - src/api/response.ts
  - src/config/storage.ts
autonomous: true

must_haves:
  truths:
    - "README uses grounded-search-mcp naming throughout"
    - "GSD integration guide documents project-level agent override"
    - "GSD integration guide includes /grounded-search:prep-gsd quick start"
    - "Module docstrings updated to grounded-search-mcp"
  artifacts:
    - path: "README.md"
      provides: "Main project documentation with correct naming"
      contains: "grounded-search-mcp"
    - path: "docs/gsd-integration.md"
      provides: "Accurate GSD integration guide with prep-gsd instructions"
      contains: "prep-gsd"
  key_links:
    - from: "README.md"
      to: "docs/gsd-integration.md"
      via: "documentation link"
      pattern: "gsd-integration"
---

<objective>
Update all documentation and source file comments to use grounded-search-mcp naming and reflect accurate GSD integration.

Purpose: Documentation must match the renamed project and provide accurate instructions for GSD integration based on verified agent override behavior.

Output: Updated README.md, docs/gsd-integration.md, and source file docstrings.
</objective>

<execution_context>
@/home/skello/.claude/get-shit-done/workflows/execute-plan.md
@/home/skello/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06.1-uat-gap-closure/06.1-CONTEXT.md
@.planning/phases/06.1-uat-gap-closure/06.1-RESEARCH.md
@.planning/phases/06.1-uat-gap-closure/06.1-02-SUMMARY.md

@README.md
@docs/gsd-integration.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update README.md with new naming</name>
  <files>README.md</files>
  <action>
Perform a comprehensive rename in README.md:

1. **Title**: Change to "grounded-search-mcp"

2. **Replace all occurrences**:
   - "gemini-search-mcp" → "grounded-search-mcp"
   - "gemini-search" (when referring to MCP server key) → "grounded-search"
   - Update .mcp.json example to use "grounded-search" as key

3. **Installation section**: Update npm command if present:
   ```
   npm install -g grounded-search-mcp
   ```

4. **Configuration examples**: Update any .mcp.json examples:
   ```json
   {
     "mcpServers": {
       "grounded-search": {
         "command": "grounded-search-mcp"
       }
     }
   }
   ```

5. **Tool references**: Update MCP tool names in documentation:
   - `mcp__gemini-search__grounded_search` → `mcp__grounded-search__grounded_search`
   - Similar for auth and config tools

6. **Add GSD quick start**: Add a prominent section near the top (after installation):
   ```markdown
   ## GSD Users

   If you use the GSD (Get Shit Done) framework:

   ```
   /grounded-search:prep-gsd
   ```

   This configures your GSD research agents to prefer grounded_search over WebSearch.
   See [GSD Integration Guide](./docs/gsd-integration.md) for details.
   ```

7. **Description**: Ensure description is provider-agnostic:
   "MCP server providing grounded Google Search with real-time results and source citations"

Do NOT change the content/structure of sections beyond naming updates.
  </action>
  <verify>grep -c "gemini-search" README.md returns 0 (no old naming)</verify>
  <done>README.md uses grounded-search-mcp naming throughout and includes GSD quick start</done>
</task>

<task type="auto">
  <name>Task 2: Rewrite GSD integration guide</name>
  <files>docs/gsd-integration.md</files>
  <action>
Rewrite docs/gsd-integration.md with accurate information based on research findings.

**Key changes from original:**
- Project-level agents override user-level agents (same name)
- Use .claude/agents/ directory (standard Claude Code location)
- Include /grounded-search:prep-gsd as primary quick start
- Remove incorrect --agent flag suggestions

**New structure:**

```markdown
# GSD Integration Guide

Integrate grounded-search-mcp with the GSD (Get Shit Done) framework for better research quality.

## Quick Start

Run the prep command to automatically configure your project:

```
/grounded-search:prep-gsd
```

This checks your current configuration and offers to:
- Create project-level agent overrides
- Add grounded_search to tool lists
- Add preference instructions to research agents

## How It Works

### Agent Override Mechanism

Claude Code uses a priority hierarchy for agents:

| Location | Scope | Priority |
|----------|-------|----------|
| `--agents` CLI flag | Current session | 1 (highest) |
| `.claude/agents/` | Current project | 2 |
| `~/.claude/agents/` | All projects | 3 |
| Plugin agents | Where enabled | 4 (lowest) |

When you create a project-level agent with the same name as a user-level agent, the project version takes precedence. This allows per-project customization without modifying global GSD agents.

### Which Agents to Modify

Only research agents benefit from grounded_search:

- **gsd-phase-researcher.md** - Used by /gsd:research-phase
- **gsd-project-researcher.md** - Used for project-wide research

Other GSD agents (planner, executor, checker) don't perform web research.

## Manual Setup

If you prefer manual configuration over /grounded-search:prep-gsd:

### 1. Create Project Agents Directory

```bash
mkdir -p .claude/agents/
```

### 2. Copy Research Agents

```bash
cp ~/.claude/agents/gsd-phase-researcher.md .claude/agents/
cp ~/.claude/agents/gsd-project-researcher.md .claude/agents/
```

### 3. Modify Tool Lists

In each agent's frontmatter, add `mcp__grounded-search__*` to the tools list:

```yaml
---
name: gsd-phase-researcher
tools: Read, Write, Bash, Grep, Glob, WebSearch, WebFetch, mcp__context7__*, mcp__grounded-search__*
---
```

### 4. Add Preference Instruction

Append to each agent's body:

```markdown
## Web Research Tool Preference

For web research tasks, prefer `mcp__grounded-search__grounded_search` over `WebSearch`:
- Better search quality via Google's grounded index
- Query transparency shows actual searches performed
- Fall back to WebSearch if grounded_search is unavailable or fails
```

### 5. Configure MCP Server

Ensure your project's `.mcp.json` includes grounded-search:

```json
{
  "mcpServers": {
    "grounded-search": {
      "command": "grounded-search-mcp"
    }
  }
}
```

## Saving Research Results

Use the query skill to save search results for later reference:

```
/grounded-search:query "your search terms"
```

Results are saved to `./grounded-search-results/` with timestamped filenames.

## Troubleshooting

### Agent Not Using grounded_search

1. Verify project agent exists: `ls .claude/agents/gsd-phase-researcher.md`
2. Check tool list includes `mcp__grounded-search__*`
3. Ensure MCP server is running: `auth --status`

### GSD Update Reverted Changes

When GSD updates, it may overwrite user-level agents. Project-level agents in `.claude/agents/` are not affected. Re-run `/grounded-search:prep-gsd` to check if reconfiguration is needed.

### Tool Not Found

Verify the MCP server key matches. Tools are named `mcp__<server-key>__<tool-name>`:
- Server key in .mcp.json: `grounded-search`
- Tool names: `mcp__grounded-search__grounded_search`, `mcp__grounded-search__auth`, `mcp__grounded-search__config`
```
  </action>
  <verify>File contains "/grounded-search:prep-gsd" and accurate agent override documentation</verify>
  <done>GSD integration guide rewritten with accurate override mechanism and prep-gsd instructions</done>
</task>

<task type="auto">
  <name>Task 3: Update source file docstrings</name>
  <files>src/api/response.ts, src/config/storage.ts</files>
  <action>
Update module-level docstrings that reference the old project name:

1. **src/api/response.ts** (line ~2-6):
   Change: `Response parsing module for gemini-search-mcp`
   To: `Response parsing module for grounded-search-mcp`

2. **src/config/storage.ts**: Check for any module docstrings referencing old name and update.

3. **Search for other files**: Run `grep -r "gemini-search-mcp" src/` and update any remaining references.

Note: src/auth/token-storage.ts was already updated in Plan 02.
  </action>
  <verify>grep -r "gemini-search-mcp" src/ returns empty (no old naming in source)</verify>
  <done>All source file docstrings use grounded-search-mcp naming</done>
</task>

</tasks>

<verification>
1. `grep -c "gemini-search" README.md` returns 0
2. `grep -c "gemini-search" docs/gsd-integration.md` returns 0
3. `grep -r "gemini-search-mcp" src/` returns empty
4. README.md contains GSD quick start section with /grounded-search:prep-gsd
5. docs/gsd-integration.md documents agent override mechanism correctly
6. docs/gsd-integration.md includes /grounded-search:prep-gsd as quick start
</verification>

<success_criteria>
- All documentation uses grounded-search-mcp naming
- README includes prominent GSD quick start section
- GSD integration guide accurately describes agent override
- GSD integration guide references /grounded-search:prep-gsd
- No "gemini-search" references remain in docs or source
</success_criteria>

<output>
After completion, create `.planning/phases/06.1-uat-gap-closure/06.1-04-SUMMARY.md`
</output>
